function j_template(t){var e=t.LABEL,r=t.JSONS,n=j.getattr_eval(e,"j-attr");n?!0===n.first?(j.attr(e,n,r),j.domain(e,r)):(j.domain(e,r),j.attr(e,n,r)):j.domain(e,r),j.text(e,r),j.value(e,r),j.timeStamp(e,r),j.href(e,r),j.src(e,r),j.number(e,r),j.arrays(e,r),j.map(e,r),j.select(e,r),j.title(e,r),j.recursion(e,r),j.loop(e,r)}
var j={container:new Array,containerMap:{},put:function(t,e){t=new String(t).toString(),isE(containerMap[t])?container[containerMap[t]]=e:(containerMap[t]=container.length,container.push(e))},get:function(t){var e=containerMap[t];return isE(e)?null:container[e]},src_404:"",getUP:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),r=decodeURIComponent(window.location.search.substr(1)).match(e);return null!=r?unescape(r[2]):null},id:function(t){return window.document.getElementById(t)},isE:function(t){return null==t||""==t||0==t.length||void 0===t||"undefined"===t},_isE:function(t){return!j.isE(t)},isEE:function(){for(var t=arguments[0],e=1;e<arguments.length;e++)if(t!==!isE(arguments[e]))return!1;return!0},getattr:function(){for(var t="",e=1;e<arguments.length;e++)if(t=arguments[0].getAttribute(arguments[e]),!j.isE(t))return t},getattr_eval:function(){return eval("("+getattr(arguments)+")")},src404:function(t){j._isE(j.src_404)&&(t.src=j.src_404),t.setAttribute("onerror",j.getattr(t,"onerror").replace("j.src404(this);",""))},number_format:function(t,e){var r,n=Math.round(new Number(t).valueOf())===new Number(t).valueOf(),a=((t=new Number(t).toString()).length,t.indexOf("."));if(j._isE(e.retain)&&j._isE(e.rounding)||!0===e.natural?(r=e.natural?parseInt(new Number(t)/Math.pow(10,e.retain)):!1===n?t.slice(0,a)+"."+t.substr(a+1,e.retain):t,t.substr(r.length,1)>e.rounding&&(r=(r=new Number(r)+new Number(n?1:Math.pow(10,-e.retain))).toString())):j._isE(e.retain)&&0==n?r=t.slice(0,a)+"."+t.substr(a+1,e.retain):j._isE(e.rounding)?t.substr(t.length-1,1)>e.rounding&&(r=(r=new Number(t)+new Number(n?1:Math.pow(10,-e.retain))).toString()):r=t,e.hexadecimal)r=new Number(r).toString(e.hexadecimal);else if(!0===e.scm){var i=Math.floor(Math.log(r)/Math.LN10);r=r*Math.pow(10,-i)+"e"+i}if(e.fill&&!1===n)for(var l=(r.split(".")[1]+"").toString().length;l<e.rounding;)l++,r+="0";if(e.interval&&void 0!==e.scm){var o=r;for(t="";o.length>e.interval[0];)t+=o.slice(0,e.interval[0])+e.interval[1],o=o.slice(e.interval[0],o.length);r=t+=o}return r},text:function(){var t=getattr(arguments[0],"j-t","j-text","j-k","j-key");t&&(arguments[0].innerText=arguments[1][t])},value:function(t,e){var r=getattr(t,"j-v","j-value","name");if(r)switch(t.tagname){case"INPUT":break;default:t.innerText=e[r]}},timeStamp:function(){var t=getattr_eval(arguments[0],"j-t-s","j-time-stamp");t&&(arguments[0].innerText=new Date(arguments[1][t.time]).format(_isE(j.format)?j.format:"yyyy-MM-dd hh:mm:ss"))},href:function(){var t=getattr_eval(arguments[0],"j-h","j-href");if(t){var e="";t.top&&(e+=t.top),t.href&&(e+=arguments[1][t.href]),t.para&&(-1==e.indexOf()&&(e+="?"),t.para.length||t.para.length)}arguments[0].href=e},src:function(){var t=getattr_eval(arguments[0],"j-s","j-src");if(t){var e="";t.top&&(e+=t.top),t.src&&(e+=arguments[1][t.src]);var r=e.lastIndexOf(".");t.format&&(-1==r?e+=t.format:e=e.slice(0,r)+t.format+e.slice(r,e.length)),t.suffix&&(-1==r?e+=t.suffix:e=e.slice(0,r)+t.suffix),!0===t.lazyload&&arguments[0].setAttribute("j-lazyload",e),t.buffer?(arguments[0].onload=function(){!0!==t.lazyload&&(arguments[0].src=e)},arguments[0].src=t.buffer):!0!==t.lazyload&&(arguments[0].src=e)}},number:function(){var t=getattr_eval(label,"j-n","j-number");if(t){var e=arguments[1][t.number];t.format&&(e=number_format(e,t.format)),arguments[0].innerText=e}},arrays:function(){var t=j.getattr_eval(arguments[0],"j-arr");t&&_isE(t.arr)&&_isE(t.i)&&(arguments[0].innerText=t.arr[arguments[1][t.i]])},map:function(){var t=j.getattr_eval(arguments[0],"j-k-v-p","j-key-value-pair");isEE(!0,t,t.map,t.k)&&(arguments[0].innerText=t.map[arguments[1][t.k]])},select:function(){var t=j.getattr_eval(arguments[0],"j-select");if(isEE(!0,t,t.select)){t.empty&&(arguments[0].innerHtml="");var e=arguments[1][t.select];if(t.type)if("map"==t.type)for(var r=0;r<e.length;r++){(a=document.createElement("option")).innerText=e[r][t.text],a.setAttribute("value",e[r][t.value]),arguments[0].appendChild(a)}else if("kv"==t.type)for(var n in e){var a;(a=document.createElement("option")).innerText=e[n],a.setAttribute("value",n),arguments[0].appendChild(a)}if(t.def)for(e=arguments[0].children,r=0;r<e.length;r++)if(e.value==t.def){e.setAttribute("selected","selected");break}}},title:function(){var t=getattr(label,"j.title");t&&(arguments[0].title=arguments[1][t])},thml:function(){var t=getattr(arguments[0],"j-thml");if(t){var e=document.createElement("div").innerHtml=arguments[1][t];document[0].innerHtml=e.innerHtml}},loop:function(){var t=getattr_eval(label,"j-f","j-for","j-loop");if(isEE(t,t.for,t.mould)){var e,r=document[1][t.for];if(isE(r)&&console.warn("en:json Unavailable , Please check the correct key ["+t.for+"]. ch: json数据不可用,请检查取值["+t.for+"]"),null==(e=get(t.mould))&&(e=id(t.mould)),isE(e))console.warn("en: Can't find ["+t.mould+"]mould \t ch: 找不到["+t.mould+"]这模型");else for(var n,a=0;a<r.length;a++)new j_template({LABEL:n=e.cloneNode(!0),SUPERIOR:document[0],JSONS:r[a]}),document[0].appendChild(n)}},recursion:function(){var t=document[0].children;if(!isE(t))for(var e=0;e<t.length;e++)new j_template({LABEL:t[e],SUPERIOR:document[0],JSONS:document[1]})},domain:function(){var t=t.getattr(document[0],"j-json");t&&(document[1]=document[1][t])},attr:function(label,a,field){if(a.attrs)for(var i=0;i<a.attrs.length;i++){var _attr=a.attrs[i],element,_newArr;if(_attr.arr.label?(element=get(_attr.arr.label),null==element&&(element=id(_attr.arr.label)),isE(element)&&(element=label)):element=label,_attr.arr)if(_newArr=field[_attr.arr.value],-1==_attr.arr.index)_attr.arr.split&&(_newArr=_newArr.split(_attr.arr.split));else{var _arr=eval("("+element.getAttribute(_attr.attr)+")");_arr[_attr.arr.index]=_newArr,_newArr=_arr.toString()}else if(_attr.map){var _map=eval("("+element.getAttribute(_attr.attr)+")");_map[_attr.map.key]=field[_attr.map.value],_newArr=JSON.stringify(map)}element.setAttribute(_attr.attr,_newArr)}}};Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in e)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[r]:("00"+e[r]).substr((""+e[r]).length)));return t};