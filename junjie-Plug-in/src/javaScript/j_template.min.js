function j_template(e){var t=e.LABEL,r=e.JSONS;try{for(var n=0;n<t.attributes.length;n++){var a=t.attributes[n].value;if("j-exit"==t.attributes[n].name||!j._undefined(a))return;switch(t.attributes[n].name){case"j-attr":j.attr(t,r,a);break;case"j-json":j.domain(t,r);break;case"j-t":case"j-text":case"j-k":case"j-key":j.text(t,r[a]);break;case"j-v":case"j-value":case"name":j.value(t,r[a]);break;case"j-t-s":case"j-time-stamp":j.timeStamp(t,r,a);break;case"j-h":case"j-href":j.href(t,r,a);break;case"j-s":case"j-src":j.src(t,r,a);break;case"j-n":case"j-number":j.number(t,r,a);break;case"j-arr":j.arrays(t,r,a);break;case"j-k-v-p":case"j-map":case"j-key-value-pair":j.map(t,r,a);break;case"j-select":j.select(t,r,a);break;case"j-title":j.title(t,r[a]);break;case"j-thml":j.thml(t,r[a]);break;case"j-f":case"j-for":case"j-loop":return void j.loop(t,r,a)}j.recursion(t,r)}}catch(e){console.error("en:Rendering error ;Automatically skips errors and continues to process backwards. zh:渲染错误;自动跳过错误继续向后处理 ;E->"+e)}}var j={container:new Array,containerMap:{},put:function(e,t){e=new String(e).toString(),isE(containerMap[e])?container[containerMap[e]]=t:(containerMap[e]=container.length,container.push(t))},get:function(e){var t=containerMap[e];return isE(t)?null:container[t]},src_404:"",getUP:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),r=decodeURIComponent(window.location.search.substr(1)).match(t);return null!=r?unescape(r[2]):null},id:function(e){return window.document.getElementById(e)},isE:function(e){return null==e||""==e||0==e.length||void 0===e||"undefined"===e},_isE:function(e){return!j.isE(e)},isEE:function(){for(var e=arguments[0],t=1;t<arguments.length;t++)if(e!==!isE(arguments[t]))return!1;return!0},getattr:function(){for(var e="",t=1;t<arguments.length;t++)if(e=arguments[0].getAttribute(arguments[t]),!j.isE(e))return e},getattr_eval:function(){return eval("("+getattr(arguments)+")")},src404:function(e){j._isE(j.src_404)&&(e.src=j.src_404),e.setAttribute("onerror",j.getattr(e,"onerror").replace("j.src404(this);",""))},number_format:function(e,t){var r,n=Math.round(new Number(e).valueOf())===new Number(e).valueOf(),a=((e=new Number(e).toString()).length,e.indexOf("."));if(j._isE(t.retain)&&j._isE(t.rounding)||!0===t.natural?(r=t.natural?parseInt(new Number(e)/Math.pow(10,t.retain)):!1===n?e.slice(0,a)+"."+e.substr(a+1,t.retain):e,e.substr(r.length,1)>t.rounding&&(r=(r=new Number(r)+new Number(n?1:Math.pow(10,-t.retain))).toString())):j._isE(t.retain)&&0==n?r=e.slice(0,a)+"."+e.substr(a+1,t.retain):j._isE(t.rounding)?e.substr(e.length-1,1)>t.rounding&&(r=(r=new Number(e)+new Number(n?1:Math.pow(10,-t.retain))).toString()):r=e,t.hexadecimal)r=new Number(r).toString(t.hexadecimal);else if(!0===t.scm){var i=Math.floor(Math.log(r)/Math.LN10);r=r*Math.pow(10,-i)+"e"+i}if(t.fill&&!1===n)for(var s=(r.split(".")[1]+"").toString().length;s<t.rounding;)s++,r+="0";if(t.interval&&void 0!==t.scm){var o=r;for(e="";o.length>t.interval[0];)e+=o.slice(0,t.interval[0])+t.interval[1],o=o.slice(t.interval[0],o.length);r=e+=o}return r},text:function(){_undefined(arguments[1])&&(arguments[0].innerText=arguments[1])},_undefined:function(e){return void 0!==e},value:function(){if(_undefined(arguments[1]))switch(arguments[0].tagname){case"INPUT":switch(arguments[0].type){case"text":case"butt":arguments[0].value=arguments[1]}break;case"BUTTON":arguments[0].value=arguments[1];break;default:arguments[0].innerText=arguments[1]}},timeStamp:function(){var t=eval("("+arguments[2]+")");t&&(arguments[0].innerText=theNearFuture(arguments[1][t.time],t))},theNearFuture:function(e,t){var r=new Date,n=new Date(e),a=r.getTime()-n.getTime();if(void 0!==t.lately&&(a<0?-a/1e3:a/1e3)<=(t.second?t.second:172800)){var i,s,o,l,u,m,c,f,g,h,d,p,v,_,b,y,w,E,M;if(!0===t.lately)switch(j.getattr(window.document.getElementsByTagName("html")[0],"lang")){case"zh":t.lately={today:"今天",tomorrow:"明天",yesterday:"昨天",thisMonth:"本月",thisYear:"今年",now:"刚刚",minute:"分钟",hour:"小时",day:"天",month:"月",year:"年",front:"前",behind:"后",am:"上午",pm:"下午",A:"的",time:"点",branch:"分"};break;default:t.lately={today:"today",tomorrow:"tomorrow",yesterday:"yesterday",thisMonth:"thisMonth",thisYear:"thisYear",now:"now",minute:"minute",hour:"hour",day:"day",month:"month",year:"year",front:"front",behind:"behind",am:"AM",pm:"PM",A:" a ",time:"time",branch:"branch"}}if(i=t.lately.today,s=t.lately.tomorrow,o=t.lately.yesterday,l=t.lately.thisYear,t.lately.thisMonth,u=t.lately.now,m=t.lately.minute,c=t.lately.hour,f=t.lately.branch,g=t.lately.time,h=t.lately.day,d=t.lately.month,p=t.lately.year,v=t.lately.front,_=t.lately.behind,b=t.lately.am,y=t.lately.pm,w=t.lately.A,a>=0){if(a<=6e4)return u;M=v}else M=_,a=-a;if(E=(n.getHours()>12?y:b)+(n.getHours()>12?n.getHours()-12:n.getHours())+g+n.getMinutes()+f,r.getFullYear()!=n.getFullYear())return v+p+w+(n.getMonth()+1)+d+n.getDate()+h+E;if(r.getMonth()!=n.getMonth())return l+(n.getMonth()+1)+w+n.getDate()+h+E;if(r.getDate()!=n.getDate()){var x=r.getDate()-n.getDate();return 1==x||-1==x?(1==x?o:s)+E:(x<0?-x:x)+h+w+M+E}if(a<=144e5){var k=new Date(a);return a<36e5?k.getMinutes()+m+M:(k=new Date(a)).getUTCHours()+c+k.getMinutes()+m+M}return i+E}return new Date(e).format(j._isE(t.format)?t.format:"yyyy-MM-dd hh:mm:ss")},href:function(){var h=eval("("+arguments[2]+")");if(h){var _href="";h.top&&(_href+=h.top),h.href&&(_href+=arguments[1][h.href]),h.para&&(-1==_href.indexOf()&&(_href+="?"),h.para.length||h.para.length)}arguments[0].href=_href},src:function(){var s=eval("("+arguments[2]+")");if(s){var _src="";s.top&&(_src+=s.top),s.src&&(_src+=arguments[1][s.src]);var last=_src.lastIndexOf(".");s.format&&(-1==last?_src+=s.format:_src=_src.slice(0,last)+s.format+_src.slice(last,_src.length)),s.suffix&&(-1==last?_src+=s.suffix:_src=_src.slice(0,last)+s.suffix),!0===s.lazyload&&arguments[0].setAttribute("j-lazyload",_src),s.buffer?(arguments[0].onload=function(){!0!==s.lazyload&&(arguments[0].src=_src)},arguments[0].src=s.buffer):!0!==s.lazyload&&(arguments[0].src=_src)}},number:function(){var n=eval("("+arguments[2]+")");if(n){var num=arguments[1][n.number];n.format&&(num=number_format(num,n.format)),arguments[0].innerText=num}},arrays:function(){var a=eval("("+arguments[2]+")");a&&_isE(a.arr)&&_isE(a.i)&&(arguments[0].innerText=a.arr[arguments[1][a.i]])},map:function(){var m=eval("("+arguments[2]+")");isEE(!0,m,m.map,m.k)&&(arguments[0].innerText=m.map[arguments[1][m.k]])},select:function(){var s=eval("("+arguments[2]+")");if(isEE(!0,s,s.select)){s.empty&&(arguments[0].innerHtml="");var options=arguments[1][s.select];if(s.type)if("map"==s.type)for(var i=0;i<options.length;i++){var option=document.createElement("option");option.innerText=options[i][s.text],option.setAttribute("value",options[i][s.value]),arguments[0].appendChild(option)}else if("kv"==s.type)for(var op in options){var option=document.createElement("option");option.innerText=options[op],option.setAttribute("value",op),arguments[0].appendChild(option)}if(s.def)for(var options=arguments[0].children,i=0;i<options.length;i++)if(options.value==s.def){options.setAttribute("selected","selected");break}}},title:function(){_undefined(arguments[1])&&(arguments[0].title=arguments[1])},thml:function(){if(_undefined(document[1])){var e=document.createElement("div").innerHtml=arguments[1];document[0].innerHtml=e.innerHtml}},loop:function(){var l=eval("("+document[2]+")");if(isEE(l,l.for,l.mould)){var range=document[1][l.for],rendering;if(isE(range)&&console.warn("en:json Unavailable , Please check the correct key ["+l.for+"]. zh: json数据不可用,请检查取值["+l.for+"]"),rendering=get(l.mould),null==rendering&&(rendering=id(l.mould)),isE(rendering))console.warn("en: Can't find ["+l.mould+"]mould \t zh: 找不到["+l.mould+"]这模型");else for(var timeElement,i=0;i<range.length;i++)timeElement=rendering.cloneNode(!0),new j_template({LABEL:timeElement,SUPERIOR:document[0],JSONS:range[i]}),document[0].appendChild(timeElement)}},recursion:function(){var e=document[0].children;if(!isE(e))for(var t=0;t<e.length;t++)new j_template({LABEL:e[t],SUPERIOR:document[0],JSONS:document[1]})},domain:function(){var e=e.getattr(document[0],"j-json");e&&(document[1]=document[1][e])},attr:function(label,field,a){if(a.attrs)for(var i=0;i<a.attrs.length;i++){var _attr=a.attrs[i],element,_newArr;if(_attr.arr.label?(element=get(_attr.arr.label),null==element&&(element=id(_attr.arr.label)),isE(element)&&(element=label)):element=label,_attr.arr)if(_newArr=field[_attr.arr.value],-1==_attr.arr.index)_attr.arr.split&&(_newArr=_newArr.split(_attr.arr.split));else{var _arr=eval("("+element.getAttribute(_attr.attr)+")");_arr[_attr.arr.index]=_newArr,_newArr=_arr.toString()}else if(_attr.map){var _map=eval("("+element.getAttribute(_attr.attr)+")");_map[_attr.map.key]=field[_attr.map.value],_newArr=JSON.stringify(map)}element.setAttribute(_attr.attr,_newArr)}}};Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in t)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[r]:("00"+t[r]).substr((""+t[r]).length)));return e};
